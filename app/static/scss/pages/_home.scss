/* ===================================================================
   Home ‚Äî pain√©is e ajustes de layout
   =================================================================== */

@use "../components/cards";

/* Evite overflow global desnecess√°rio */
main#home-main { min-height: 0; }

/* ===== Hero: t√≠tulo + p√≠lulas mais enxutos ===== */
.home-hero__title{
  font: 600 clamp(1.25rem, 2.2vw + 0.9rem, 2.05rem)/ 0.9 var(--font);
  text-align: center;
  letter-spacing: .01em;
  margin: 0 0 .75rem;
}

.home-hero__pills{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: .5rem .6rem;
  margin: .2rem 0 .6rem;
}

/* Respiro padr√£o do container principal */
main#home-main.home-hero.container{
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 1.5rem 1rem 1.5rem;
}

/* Card hero (com os bot√µes grandes) mais enxuto quando a viewport √© baixa */
@media (max-height: 820px){
  .glass-card { margin-bottom: .75rem; }
}

/* =================== Pain√©is =================== */
.home-panels{
  width: 100%;
  max-width: 1500px;
  margin: 1rem auto 0;
  padding: 0 1rem;

  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;

  /* üîí Altura limitada por viewport e respeitando o rodap√©.
     Usamos block-size + overflow para criar SCROLL LOCAL dos pain√©is. */
  block-size: calc(100vh - var(--footer-h, 56px) - 3.25rem);
  overflow: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable both-edges;
}
@supports (height: 100dvh){
  .home-panels{
    block-size: calc(100dvh - var(--footer-h, 56px) - 3.25rem);
  }
}
@media (min-width: 960px){
  .home-panels{ grid-template-columns: 1fr 1fr; }
}

/* Card dos pain√©is */
.panel{
  @extend %card-base;
  max-width: none;
  padding: 1rem 1.1rem;

  display: flex;
  flex-direction: column;
  min-height: 0; /* permite que o .changelog encolha e gere scroll */

  h3{
    margin: 0 0 .3rem 0;
    font-size: 1.05rem;
    line-height: 1.32;
    display: flex;
    align-items: center;
    gap: .5rem;
  }

  .muted{
    color: var(--text-muted, var(--muted));
    font-size: .95rem;
    margin-bottom: .45rem;
  }

  .footer{
    margin-top: .35rem;
    font-size: .92rem;
    color: var(--text-muted);
  }
}

/* Lista com scroll local dentro do card */
.changelog{
  list-style: none;
  margin: 0;
  padding: 0;

  flex: 1 1 auto;
  min-height: 0;

  /* Menor por padr√£o para evitar colis√£o com o footer em telas baixas */
  max-block-size: clamp(200px, 38vh, 480px);
  overflow: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable both-edges;
}
@supports (height: 100dvh){
  .changelog{
    max-block-size: min(45vh, calc(100dvh - var(--footer-h, 56px) - 12rem));
  }
}

/* Itens */
.changelog .item{
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: start;
  gap: .35rem .7rem;
  padding: .55rem 0;
  border-top: 1px dashed var(--glass-border);
  &:first-child{ border-top: 0; }

  .title{ font-weight: 700; line-height: 1.3; letter-spacing: .005em; }

  .desc{
    grid-column: 1 / -1;
    color: var(--text-muted);
    font-size: .95rem;
    line-height: 1.45;
    margin-top: .05rem;
    white-space: pre-line;
    overflow: visible;
    text-overflow: clip;
    display: block;
  }

  .meta{
    justify-self: end;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: .5rem;
    font-size: .9rem;
    color: var(--text-muted);
  }

  .tag{
    border: 1px solid var(--glass-border);
    background: var(--glass-bg);
    border-radius: 999px;
    padding: .12rem .5rem;
    line-height: 1.2;
    font-weight: 700;
  }
}

/* A√ß√µes */
.panel .actions{
  display: flex;
  justify-content: flex-end;
  margin-top: .3rem;
}
.panel .actions .btn-link{
  font-weight: 700;
  text-decoration: none;
  padding: .25rem .25rem;
}
.panel .actions .btn-link:hover{ text-decoration: underline; }

/* Viewports ‚Äúbaixas‚Äù: encolhe um pouco o hero e limita mais as listas */
@media (max-height: 740px){
  .home-hero__title{ line-height: 1.05; margin-bottom: .55rem; }
  .home-hero__pills{ margin-bottom: .45rem; }
  .changelog{ max-block-size: clamp(180px, 34vh, 420px); }
}
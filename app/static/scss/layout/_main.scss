/* ===== Main (√°rea de conte√∫do) =====
   Depende de: --bg-color, --text, --font, --header-h, --footer-h
*/

html, body{ height:100%; margin:0; }
body{ display:flex; flex-direction:column; }

/* utilit√°rio container */
.container{ width:100%; max-width:900px; margin:0 auto; padding:0 1rem; }

/* main padr√£o (SEM reservar o footer de novo) */
main{
  flex:1;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  background: var(--bg-color);

  /* altura √∫til = viewport - header (o body j√° ‚Äúguardou‚Äù o footer) */
  min-height: calc(100dvh - var(--header-h));
  @supports (height: 100svh){ min-height: calc(100svh - var(--header-h)); }

  /* respiro normal; sem somar --footer-h aqui */
  padding: 2rem 1rem 2rem;

  overflow-x: clip;
  overflow-y: auto;
  min-height: 0;

  /* telas que desabilitam o scroll do main quando h√° preview */
  &.with-preview{ overflow-y: visible; }

  /* wrapper dropzone + preview (merge/split/compress) */
  .upload-preview-wrapper{
    display:flex; flex-wrap:wrap; gap:1.5rem;
    width:100%; max-width:900px; margin:0 auto;
    .dropzone-container{ flex:1 1 300px; }
  }

  /* preview com scroll pr√≥prio (aqui sim desconta o footer) */
  &.with-preview .preview-container{
    overflow-y:auto;
    max-height: calc(100dvh - var(--header-h) - var(--footer-h) - 7rem);
    @supports (height: 100svh){
      max-height: calc(100svh - var(--header-h) - var(--footer-h) - 7rem);
    }
  }
}

/* p√≠lulas de navega√ß√£o: sempre acima do footer fixo */
.btn-wrapper.nav-buttons{
  margin: 2rem auto calc(1.25rem + var(--footer-h) + env(safe-area-inset-bottom, 0px));
}

@supports (margin: constant(safe-area-inset-bottom)){
  .btn-wrapper.nav-buttons{
    margin-bottom: calc(1.25rem + var(--footer-h) + constant(safe-area-inset-bottom, 0px));
  }
}

/* hero da home */
.home-hero{ width:100%; max-width:1100px; margin:0 auto; padding:2rem 1rem; }
.home-hero__title{
  text-align:center; color: var(--text);
  font:700 clamp(1.25rem, 2vw + 1rem, 1.8rem)/1.3 var(--font);
  margin:0 0 1.25rem;
}

/* mobile: cart√µes menores */
@media (max-width: 720px){ .action-card{ min-height:112px; } }

/* dropzone overlay 100% clic√°vel */
.dropzone{ position:relative; }
.dz-input-overlay{ position:absolute; inset:0; width:100%; height:100%; opacity:0; cursor:pointer; }

/* ===== Centraliza√ß√£o para p√°ginas com 1 card =====
   Use class="main--center" no <main>. Centraliza mesmo, sem empurrar.
*/
main.main--center{
  justify-content:center;

  /* √°rea √∫til = viewport - header - footer */
  min-height: calc(100dvh - var(--header-h) - var(--footer-h));
  @supports (height: 100svh){
    min-height: calc(100svh - var(--header-h) - var(--footer-h));
  }

  /* respiros sim√©tricos; bottom s√≥ a safe-area */
  padding-top: 2rem;
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* com preview, ancora no topo e rep√µe o respiro maior */
main.main--center.has-preview{
  justify-content: flex-start;

  min-height: calc(100dvh - var(--header-h));
  @supports (height: 100svh){
    min-height: calc(100svh - var(--header-h));
  }

  /* üëá aqui √© o conserto */
  padding-bottom:
    calc(1.5rem + var(--footer-h) + env(safe-area-inset-bottom, 0px));

}

/* fallback autom√°tico (sem JS) se suportar :has() */
@supports selector(:has(*)){
  main.main--center:not(.has-preview):has(.preview-container .page){
    justify-content:flex-start;
  }
}
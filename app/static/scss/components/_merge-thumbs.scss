/* ==========================================================================
   COMPONENTES — Thumbs do /merge no grid único (mesmo look do split)
   ========================================================================== */

/* knobs (largura base das thumbs) */
:root {
  --thumb-w: 200px; /* ↑ antes 180px */
  --thumb-gap: 12px;
}

/* o grid base já existe (preview-grid/thumb-grid); reforçamos o gap */
.preview-grid.thumb-grid { gap: var(--thumb-gap); }

/* ---------- Paleta por origem (A..Z) ------------------------------------- */
$src-colors: (
  "A": #00995d, "B": #3213f9, "C": #0032bc, "D": #dd0000, "E": #ffffff, "F": #8e5c2e,
  "G": #16a085, "H": #2c3e50, "I": #c0392b, "J": #3f51b5, "K": #8bc34a, "L": #00bcd4,
  "M": #e67e22, "N": #9b59b6, "O": #f39c12, "P": #34495e, "Q": #1abc9c, "R": #e74c3c,
  "S": #27ae60, "T": #2980b9, "U": #d35400, "V": #7f8c8d, "W": #2ecc71, "X": #3498db,
  "Y": #f1c40f, "Z": #e84393
);
@each $letter, $color in $src-colors {
  .page-wrapper.page-thumb[data-source="#{$letter}"] {
    .page-badge, .source-badge {
      background: #{$color};
      color: #fff;
      text-shadow: 0 1px 1px rgba(0,0,0,.25);
    }
  }
}

/* ---------- Card base ----------------------------------------------------- */
.page-wrapper.page-thumb {
  position: relative;
  inline-size: var(--thumb-w);
  background: var(--surface);
  border: 1px solid var(--glass-border);
  border-radius: .8rem;
  box-shadow: 0 1px 6px rgba(0,0,0,.05);
  padding: .5rem;
  outline: none;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  user-select: none;
  overflow: hidden;
  z-index: 0;

  &:hover { transform: translateY(-1px); box-shadow: 0 3px 12px rgba(0,0,0,.08); }
  &:focus { outline: 2px solid var(--primary); outline-offset: 2px; }

  &.is-dragging { opacity: .85; }
  &.is-drop-target { box-shadow: inset 0 0 0 2px var(--primary); border-color: var(--primary); }

  &.selected {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--primary), white 35%);
  }

  .thumb-frame {
    position: relative;
    display: block;
    inline-size: 100%;
    aspect-ratio: 1 / 1.414; /* A4 retrato */
    border-radius: .6rem;
    overflow: hidden;
    background: var(--surface-2, transparent);
  }

  .thumb-media {
    position: absolute;
    top: 50%;
    left: 50%;
    display: block;
    max-inline-size: none;
    block-size: auto;
    border-radius: .6rem;
    image-rendering: auto;
    /* Hints para downscale ficar mais caprichado */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    transform-origin: 50% 50%;
    transition: transform .12s ease;
  }

  .page-badge {
    position: absolute;
    inset: .35rem .35rem auto .35rem;
    background: var(--primary);
    color: #fff;
    font-weight: 700;
    font-size: .78rem;
    line-height: 1;
    border-radius: .4rem;
    padding: .25rem .5rem;
    z-index: 3;
    pointer-events: none;
    box-shadow: 0 1px 3px rgba(0,0,0,.15);
  }

  .source-badge {
    position: absolute;
    inset: auto auto .45rem .55rem;
    background: var(--primary);
    color: #fff;
    font-weight: 800;
    font-size: .75rem;
    border-radius: .45rem;
    padding: .12rem .4rem;
    z-index: 3;
    pointer-events: none;
    box-shadow: 0 1px 3px rgba(0,0,0,.2);
  }

  .file-controls {
    position: absolute;
    top: .3rem;
    right: .35rem;
    display: flex;
    gap: .25rem;
    z-index: 4;

    button {
      appearance: none;
      border: 1px solid rgba(0,0,0,.35);
      background: rgba(0,0,0,.75);
      color: #fff;
      inline-size: 28px;
      block-size: 28px;
      border-radius: .5rem;
      font-size: 16px;
      line-height: 1;
      display: grid;
      place-items: center;
      cursor: pointer;
      transition: transform .08s ease, background .12s ease, opacity .12s ease;

      &:hover { background: rgba(0,0,0,.82); }
      &:active { transform: translateY(1px); }
    }
  }
}

.page-wrapper .jump-blink { animation: blink .6s ease 1; }
@keyframes blink { from { box-shadow: 0 0 0 3px var(--primary); } to { box-shadow: 0 0 0 0 transparent; } }
.file-name + .page-wrapper { margin-top: .25rem; }
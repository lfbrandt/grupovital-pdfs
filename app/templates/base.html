{% from "macros.html" import css_links %}
<!DOCTYPE html>
<html lang="pt-br" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Grupo Vital PDFs{% endblock %}</title>

  <!-- Fontes e CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  {{ css_links() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css', v=APP_VERSION|default('1')) }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">

  <!-- CSRF/CSP -->
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <meta name="csp-nonce" content="{{ csp_nonce() }}">
  <meta name="color-scheme" content="light dark">

  <!-- Guard SES/lockdown (antes dos m√≥dulos) -->
  <script src="{{ url_for('static', filename='js/ses-guard.js', v=APP_VERSION|default('1')) }}"
          nonce="{{ csp_nonce() }}"></script>

  <!-- pdf.js local (ATEN√á√ÉO: agora em /static/pdfjs, n√£o /static/js/pdfjs) -->
  <script
    src="{{ url_for('static', filename='pdfjs/pdf.min.js', v=APP_VERSION|default('1')) }}"
    defer></script>

  <!-- Setup do worker do pdf.js, apontando para /static/pdfjs/pdf.worker.min.js -->
  <script
    src="{{ url_for('static', filename='js/pdfjs-setup.js', v=APP_VERSION|default('1')) }}"
    defer
    data-worker-src="{{ url_for('static', filename='pdfjs/pdf.worker.min.js', v=APP_VERSION|default('1')) }}"></script>

  {% block head_extra %}{% endblock %}

  <!-- Tema (global) -->
  <script nonce="{{ csp_nonce() }}" src="{{ url_for('static', filename='js/theme.js', v=APP_VERSION|default('1')) }}" defer></script>
</head>
<body>
  <header class="gv-header">
    <div class="gv-header__inner container">
      <a class="gv-brand" href="{{ url_for('index') }}" aria-label="P√°gina inicial">
        <img class="gv-brand__logo"
             src="{{ url_for('static', filename='GrupoVital_branca_horizontal.png') }}"
             alt="Grupo Vital">
        <span class="gv-brand__name">Grupo Vital</span>
      </a>

      <div class="gv-header__text">
        {% block header_text %}
          <h1 class="gv-title">Sejam bem-vindos</h1>
          <p class="gv-subtitle">A nossa ferramenta de transforma√ß√£o de dados.</p>
        {% endblock %}
      </div>

      <div class="gv-header__right">
        <button id="theme-toggle" class="gv-toggle" type="button" aria-pressed="false" aria-label="Alternar tema claro/escuro">
          <span class="icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
          <span class="icon-moon" aria-hidden="true">üåô</span>
        </button>
      </div>
    </div>
  </header>

  {% block content %}{% endblock %}

  <footer>
    <div class="container footer-inner">
      <p>¬© 2025 Grupo Vital corp ‚Äî Todos os direitos reservados.</p>
      <span class="footer-version">v {{ APP_VERSION|default('alpha 0.5') }}</span>
    </div>
  </footer>

  {# Cada p√°gina injeta S√ì o que precisa aqui (m√≥dulos ES). #}
  {% block scripts %}{% endblock %}
</body>
</html>
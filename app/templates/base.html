{% from "macros.html" import css_links %}
<!DOCTYPE html>
<html lang="pt-br" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Grupo Vital PDFs{% endblock %}</title>

  <!-- Fontes e CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  {{ css_links() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css', v=APP_VERSION|default('1')) }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">

  <!-- CSRF/CSP -->
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <meta name="csp-nonce" content="{{ csp_nonce() }}">

  {# Guard contra throw null sob SES/lockdown ‚Äî carregado antes dos m√≥dulos #}
  <script src="{{ url_for('static', filename='js/ses-guard.js', v=APP_VERSION|default('1')) }}"
          nonce="{{ csp_nonce() }}"></script>

  {% block head_extra %}{% endblock %}

  <!-- Tema (global) -->
  <script nonce="{{ csp_nonce() }}" src="{{ url_for('static', filename='js/theme.js', v=APP_VERSION|default('1')) }}" defer></script>
</head>
<body>
  <header class="gv-header">
    <div class="gv-header__inner container">
      <!-- Coluna 1: Marca -->
      <a class="gv-brand" href="{{ url_for('index') }}" aria-label="P√°gina inicial">
        <img class="gv-brand__logo"
             src="{{ url_for('static', filename='GrupoVital_branca_horizontal.png') }}"
             alt="Grupo Vital">
        <span class="gv-brand__name">Grupo Vital</span>
      </a>

      <!-- Coluna 2: Texto (t√≠tulo + subt√≠tulo) -->
      <div class="gv-header__text">
        {% block header_text %}
          <h1 class="gv-title">Sejam bem-vindos</h1>
          <p class="gv-subtitle">A nossa ferramenta de transforma√ß√£o de dados.</p>
        {% endblock %}
      </div>

      <!-- Coluna 3: A√ß√µes (toggle de tema) -->
      <div class="gv-header__right">
        <button id="theme-toggle" class="gv-toggle" type="button" aria-pressed="false" aria-label="Alternar tema claro/escuro">
          <span class="icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
          <span class="icon-moon" aria-hidden="true">üåô</span>
        </button>
      </div>
    </div>
  </header>

  {% block content %}{% endblock %}

  <footer>
    <div class="container footer-inner">
      <p>¬© 2025 Grupo Vital corp ‚Äî Todos os direitos reservados.</p>
      <span class="footer-version">v {{ APP_VERSION|default('alpha 0.5') }}</span>
    </div>
  </footer>

  {# Cada p√°gina injeta S√ì o que precisa aqui (m√≥dulos ES) #}
  {# Ex.: <script type="module" src="{{ url_for('static', filename='js/split-page.js', v=APP_VERSION|default('1')) }}" crossorigin="anonymous"></script> #}
  {% block scripts %}{% endblock %}
</body>
</html>